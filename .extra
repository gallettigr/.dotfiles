#!/usr/bin/env bash

# RBENV
if [ -x "$(command -v rbenv)" ]; then
  # Set root to Brew
  export RBENV_ROOT=/usr/local/var/rbenv
  export PATH="$HOME/.rbenv/bin:$PATH"
  eval "$(rbenv init -)"
fi

# NVM
if ([ $(brew --prefix nvm 2>/dev/null) ] && [ ! -x "$(command -v nvm)" ]); then
  NVM_BASE=$(brew --prefix nvm)
  export NVM_DIR="$HOME/.nvm"
  [ -d $NVM_DIR ] || mkdir -p $NVM_DIR
  [ -s "$NVM_BASE/nvm.sh" ] && source "$NVM_BASE/nvm.sh"
  [ -s "$NVM_BASE/etc/bash_completion.d/nvm" ] && source "$NVM_BASE/etc/bash_completion.d/nvm"
  unset NVM_BASE
fi

# JENV
if [ -x "$(command -v jenv)" ]; then
  export PATH="$HOME/.jenv/bin:$PATH"
  eval "$(jenv init -)"
fi

# PyENV
if [ -x "$(command -v pyenv)" ]; then
  export PYENV_ROOT="$HOME/.pyenv"
  export PATH="$PYENV_ROOT/bin:$PATH"
  export PATH="$HOME/.jenv/bin:$PATH"
  eval "$(pyenv init -)"
fi

# Git Number
if [ -x "$(command -v git-number)" ]; then
  # Set aliases
  alias gn="git-number --column"
  alias ga="git-number add"
  alias gc="git-number commit"
  alias gd="git-number diff"
  alias gr="git-number reset"
  alias gco="git-number checkout"

  # Completion for aliases
  if type _git &>/dev/null && [ -f /usr/local/etc/bash_completion.d/git-completion.bash ]; then
    complete -o default -o nospace -F _git git-number
  fi
fi
